{% load static %}

{% with request.resolver_match.view_name as view_name %}

  <header>
    <nav class="navbar navbar-light" style="background-color: lightskyblue">
      <div class="container">
        <a class="navbar-brand" href="{% url 'index:main' %}">
          <img src="{% static 'img/logo.png' %}" width="30" height="30" class="d-inline-block align-top" alt="">
          <span style="color:red">Ya</span>tube
        </a>
        {# Добавлено в спринте #}
  
        {% comment %}
        Меню - список пунктов со стандартными классами Bootsrap.
        Класс nav-pills нужен для выделения активных пунктов 
        {% endcomment %}
        <ul class="nav nav-pills">
          <li class="nav-item"> 
            <a class="nav-link {% if view_name  == 'about:author' %} active {% endif %}"
              href="{% url 'about:author' %}">
              Об авторе
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if view_name  == 'about:tech' %} active {% endif %}"
             href="{% url 'about:tech' %}">
             Технологии
            </a>
          </li>
           {% comment %}
          {% <!-- Проверка: авторизован ли пользователь? --> %}
          {% endcomment %}
          {% if request.user.is_authenticated %}
          <li class="nav-item"> 
            <a class="nav-link {% if view_name  == 'index:post_create' %} active {% endif %}"
             href="{% url 'index:post_create' %}">
             Новая запись
            </a>
          </li>
          <li class="nav-item"> 
            <a class="nav-link {% if view_name  == 'users:password_change' %} active {% endif %}"
             href="{% url 'users:password_change' %}">
             Изменить пароль
            </a>
          </li>
          <li class="nav-item"> 
            
            <a class="nav-link link-light" href="{% url 'users:logout' %}">Выйти</a>
            

            {% comment %}
            <a class="nav-link link-light {% if view_name == 'users:logged_out' %} active {% endif %}"
             href="{% url 'users:logout' %}">
             Выйти
             {% endcomment %}
            </a>

          </li>
          <li>
            Пользователь: {{ user.username }}
          </li>
          {% else %}
          <li class="nav-item"> 
            
            {% comment %}
            <a class="nav-link link-light" href="{% url 'users:login' %}">Войти</a>
            {% endcomment %}

            <a class="nav-link link-light {% if view_name == 'users:login' %} active {% endif %}"
             href="{% url 'users:login' %}">
             Войти
            </a>
            
          </li>
          <li class="nav-item"> 
            <a class="nav-link link-light {% if view_name == 'users:signup' %} active {% endif %}"
             href="{% url 'users:signup' %}">Зарегистрироваться</a>
          </li>
          {% endif %}
          {% endwith %} 
        </ul>
        {# Конец добавленого в спринте #}
      </div>
    </nav>      
  </header>